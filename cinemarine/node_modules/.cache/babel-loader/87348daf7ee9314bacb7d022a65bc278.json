{"remainingRequest":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/babel-loader/lib/index.js!/Users/altin/WebstormProjects/Cinema/cinemarine/src/store/modules/auth.js","dependencies":[{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/src/store/modules/auth.js","mtime":1615504490063},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7Cgp2YXIgaGVhZGVycyA9IGZ1bmN0aW9uIGhlYWRlcnMoKSB7CiAgcmV0dXJuIHsKICAgICdBdXRob3JpemF0aW9uJzogIkJlYXJlciAiLmNvbmNhdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkKICB9Owp9OwovKioKICoKICogQHR5cGUge1Z1ZS4kc3RvcmV9CiAqLwoKCmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgdXNlcjogewogICAgICBpZDogbnVsbCwKICAgICAgdXNlcm5hbWU6IG51bGwsCiAgICAgIHRva2VuOiBudWxsLAogICAgICByb2xlOiAwCiAgICB9LAogICAgbW9kYWxNc2c6IG51bGwsCiAgICBzaG93UmVnaXN0ZXJNb2RhbDogZmFsc2UKICB9LAogIG11dGF0aW9uczogewogICAgYXV0aGVudGljYXRlOiBmdW5jdGlvbiBhdXRoZW50aWNhdGUoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUudXNlci5pZCA9IHBheWxvYWQuaWQ7CiAgICAgIHN0YXRlLnVzZXIudXNlcm5hbWUgPSBwYXlsb2FkLnVzZXJuYW1lOwogICAgICBzdGF0ZS51c2VyLnRva2VuID0gcGF5bG9hZC50b2tlbjsKICAgICAgc3RhdGUudXNlci5yb2xlID0gcGF5bG9hZC5yb2xlOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnVzZXIuaWQgPSBudWxsOwogICAgICBzdGF0ZS51c2VyLnVzZXJuYW1lID0gbnVsbDsKICAgICAgc3RhdGUudXNlci50b2tlbiA9IG51bGw7CiAgICAgIHN0YXRlLnVzZXIucm9sZSA9IDA7CiAgICB9LAogICAgc2V0TWVzc2FnZTogZnVuY3Rpb24gc2V0TWVzc2FnZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5tb2RhbE1zZyA9IHBheWxvYWQ7CiAgICB9LAogICAgdXBkYXRlUmVnaXN0ZXJNb2RhbFN0YXRlOiBmdW5jdGlvbiB1cGRhdGVSZWdpc3Rlck1vZGFsU3RhdGUoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuc2hvd1JlZ2lzdGVyTW9kYWwgPSBwYXlsb2FkOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuICEhc3RhdGUudXNlci50b2tlbjsKICAgIH0sCiAgICBpc0FkbWluOiBmdW5jdGlvbiBpc0FkbWluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyLnJvbGUgPT0gMTsKICAgIH0sCiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfSwKICAgIGdldE1lc3NhZ2U6IGZ1bmN0aW9uIGdldE1lc3NhZ2Uoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm1vZGFsTXNnOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKGluamVjdGVlLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgYXhpb3MucG9zdCgndXNlci9yZWdpc3RlcicsIHsKICAgICAgICAgIHVzZXJuYW1lOiBwYXlsb2FkLnVzZXJuYW1lLAogICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICBpbmplY3RlZS5jb21taXQoJ3NldE1lc3NhZ2UnLCBudWxsKTsgLy8gaW5qZWN0ZWUuY29tbWl0KCd1cGRhdGVSZWdpc3Rlck1vZGFsU3RhdGUnLCBmYWxzZSk7CgogICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5sb2cocmVhc29uLnJlc3BvbnNlKTsKICAgICAgICAgIGluamVjdGVlLmNvbW1pdCgnc2V0TWVzc2FnZScsIHJlYXNvbi5yZXNwb25zZS5kYXRhLm1zZyk7CiAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGluamVjdGVlLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgaWYgKHBheWxvYWQudXNlcm5hbWUgPT09ICcnIHx8IHBheWxvYWQucGFzc3dvcmQgPT09ICcnKSB7CiAgICAgICAgICBpbmplY3RlZS5jb21taXQoJ3NldE1lc3NhZ2UnLCAnTWJ1c2huaSB0ZSBnaml0aGEgZnVzaGF0Jyk7CiAgICAgICAgICByZWplY3QoJ2Vycm9yJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF4aW9zLnBvc3QoJ3VzZXIvbG9naW4nLCB7CiAgICAgICAgICAgIHVzZXJuYW1lOiBwYXlsb2FkLnVzZXJuYW1lLAogICAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZAogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB2YWx1ZS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkJywgdmFsdWUuZGF0YS5pZCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2xlJywgdmFsdWUuZGF0YS5yb2xlKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJuYW1lJywgdmFsdWUuZGF0YS51c2VybmFtZSk7CiAgICAgICAgICAgIGluamVjdGVlLmNvbW1pdCgnYXV0aGVudGljYXRlJywgewogICAgICAgICAgICAgIGlkOiB2YWx1ZS5kYXRhLmlkLAogICAgICAgICAgICAgIHVzZXJuYW1lOiB2YWx1ZS5kYXRhLnVzZXJuYW1lLAogICAgICAgICAgICAgIHRva2VuOiB2YWx1ZS5kYXRhLnRva2VuLAogICAgICAgICAgICAgIHJvbGU6IHZhbHVlLmRhdGEucm9sZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaW5qZWN0ZWUuY29tbWl0KCdzZXRNZXNzYWdlJywgbnVsbCk7CiAgICAgICAgICAgIGluamVjdGVlLmRpc3BhdGNoKCdnZXRDb25maWcnKTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBpbmplY3RlZS5jb21taXQoJ3NldE1lc3NhZ2UnLCByZWFzb24ucmVzcG9uc2UuZGF0YS5tc2cpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24ucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIHJlamVjdCgnZXJyb3InKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdHJ5TG9naW46IGZ1bmN0aW9uIHRyeUxvZ2luKGluamVjdGVlKSB7CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICAgICAgaWYgKCF0b2tlbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyk7CiAgICAgIHZhciB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpOwogICAgICB2YXIgcm9sZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2xlJyk7CiAgICAgIGluamVjdGVlLmNvbW1pdCgnYXV0aGVudGljYXRlJywgewogICAgICAgIGlkOiBpZCwKICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICAgIHJvbGU6IHJvbGUKICAgICAgfSk7CiAgICAgIGluamVjdGVlLmRpc3BhdGNoKCdnZXRDb25maWcnKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChpbmplY3RlZSkgewogICAgICBpbmplY3RlZS5jb21taXQoJ2xvZ291dCcpOwogICAgICBpbmplY3RlZS5kaXNwYXRjaCgnc2V0RGVmYXVsdENvbmZpZycpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaWQnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VybmFtZScpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncm9sZScpOwogICAgfSwKICAgIGNoYW5nZVBhc3N3b3JkOiBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZChpbmplY3RlZSwgcGF5bG9hZCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGF4aW9zLnBvc3QoJ3VzZXIvcGFzc3dvcmQnLCBwYXlsb2FkLCB7CiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKCkKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgcmVzb2x2ZSh2YWx1ZS5kYXRhKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICByZWplY3QocmVhc29uLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/altin/WebstormProjects/Cinema/cinemarine/src/store/modules/auth.js"],"names":["axios","headers","localStorage","getItem","state","user","id","username","token","role","modalMsg","showRegisterModal","mutations","authenticate","payload","logout","setMessage","updateRegisterModalState","getters","isAuthenticated","isAdmin","getMessage","actions","register","injectee","Promise","resolve","reject","post","email","password","then","value","commit","catch","reason","console","log","response","data","msg","login","setItem","dispatch","tryLogin","removeItem","changePassword"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nconst headers = () => {\n    return {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n    };\n};\n/**\n *\n * @type {Vue.$store}\n */\nexport default {\n    state: {\n        user: {\n            id: null,\n            username: null,\n            token: null,\n            role: 0\n        },\n        modalMsg: null,\n        showRegisterModal: false\n    },\n    mutations: {\n        authenticate: (state, payload) => {\n            state.user.id = payload.id;\n            state.user.username = payload.username;\n            state.user.token = payload.token;\n            state.user.role = payload.role;\n        },\n        logout: state => {\n            state.user.id = null;\n            state.user.username = null;\n            state.user.token = null;\n            state.user.role = 0;\n        },\n        setMessage: (state, payload) => {\n            state.modalMsg = payload\n        },\n        updateRegisterModalState: (state, payload) => {\n            state.showRegisterModal = payload;\n        }\n    },\n    getters: {\n        isAuthenticated: state => {\n            return !!state.user.token;\n        },\n        isAdmin: state => {\n            return state.user.role == 1;\n        },\n        user: state => {\n            return state.user;\n        },\n        getMessage: state => {\n            return state.modalMsg;\n        }\n    },\n    actions: {\n        register: (injectee, payload) => {\n            return new Promise((resolve, reject) => {\n                axios.post('user/register', {\n                    username: payload.username,\n                    email: payload.email,\n                    password: payload.password,\n                })\n                    .then(value => {\n                        injectee.commit('setMessage', null);\n                        // injectee.commit('updateRegisterModalState', false);\n                        resolve(value);\n                    })\n                    .catch(reason => {\n                        console.log(reason.response);\n                        injectee.commit('setMessage', reason.response.data.msg);\n                        reject(reason);\n                    });\n            });\n        },\n        login: (injectee, payload) => {\n            return new Promise((resolve, reject) => {\n                if (payload.username === '' || payload.password === '') {\n                    injectee.commit('setMessage', 'Mbushni te gjitha fushat');\n                    reject('error');\n                } else {\n                    axios.post('user/login', {\n                        username: payload.username,\n                        password: payload.password,\n                    })\n                        .then(value => {\n                            console.log(value);\n                            localStorage.setItem('token', value.data.token);\n                            localStorage.setItem('id', value.data.id);\n                            localStorage.setItem('role', value.data.role);\n                            localStorage.setItem('username', value.data.username);\n                            injectee.commit('authenticate', {\n                                id: value.data.id,\n                                username: value.data.username,\n                                token: value.data.token,\n                                role: value.data.role\n                            });\n                            injectee.commit('setMessage', null);\n                            injectee.dispatch('getConfig');\n                            resolve();\n                        })\n                        .catch(reason => {\n                            injectee.commit('setMessage', reason.response.data.msg);\n                            console.log(reason.response.data);\n                            reject('error');\n                        });\n                }\n            })\n        },\n        tryLogin: injectee => {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                return\n            }\n            const id = localStorage.getItem('id');\n            const username = localStorage.getItem('username');\n            const role = localStorage.getItem('role');\n            injectee.commit('authenticate', {\n                id,\n                token,\n                username,\n                role\n            });\n            injectee.dispatch('getConfig');\n        },\n        logout: injectee => {\n            injectee.commit('logout');\n            injectee.dispatch('setDefaultConfig');\n            localStorage.removeItem('id');\n            localStorage.removeItem('token');\n            localStorage.removeItem('username');\n            localStorage.removeItem('role');\n        },\n        changePassword: (injectee, payload) => {\n            return new Promise((resolve, reject) => {\n                axios.post('user/password', payload, {headers: headers()})\n                    .then(value => {\n                        resolve(value.data);\n                    })\n                    .catch(reason => {\n                        reject(reason.response.data);\n                    })\n            })\n        }\n    },\n};\n\n\n"]}]}