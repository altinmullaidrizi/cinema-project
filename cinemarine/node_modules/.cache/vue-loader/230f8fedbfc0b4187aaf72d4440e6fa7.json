{"remainingRequest":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/altin/WebstormProjects/Cinema/cinemarine/src/views/admin/components/MovieModal.vue?vue&type=style&index=0&id=c22bb7a8&scoped=true&lang=css&","dependencies":[{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/src/views/admin/components/MovieModal.vue","mtime":1615842592793},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJhZGdlIC5jbG9zZSB7CiAgICBtYXJnaW4tbGVmdDogMC4yNXJlbTsKICAgIGNvbG9yOiBpbmhlcml0OwogICAgZm9udC1zaXplOiAxMDAlOwogICAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjUpOwp9Cgo="},{"version":3,"sources":["MovieModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8QA;AACA;AACA;AACA;AACA;AACA","file":"MovieModal.vue","sourceRoot":"src/views/admin/components","sourcesContent":["<template>\n    <div>\n        <v-btn color=lightred class=\"mt-6 mb-6 center text-white\">\n        <a title=\"Shto film te ri\" class=\"btn btn-link btn-sm\" @click=\"modalShow = !modalShow\">\n            <span class=\"nav-link-inner--text\">Shto film tÃ« ri</span>\n        </a>\n        </v-btn>\n        <b-modal v-model=\"modalShow\" size=\"lg\">\n            <template v-slot:modal-header>\n                <h5 v-if=\"!editing\" class=\"modal-title text-center text-muted\">Shto film te ri</h5>\n                <h5 v-if=\"editing\" class=\"modal-title text-center text-muted\">Ndrysho detajet per filmin</h5>\n                <button type=\"button\" class=\"close\" aria-label=\"Close\" @click=\"modalShow = !modalShow\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </template>\n\n            <form>\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <div class=\"form-group\">\n                            <label for=\"title\">Titulli</label>\n                            <input class=\"form-control\" type=\"text\" id=\"title\" v-model=\"title\" required>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3\">\n                        <div class=\"form-group\">\n                            <label for=\"release\">Viti i prodhimit</label>\n                            <input class=\"form-control\" type=\"number\" id=\"release\" v-model=\"releaseYear\" required>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3\">\n                        <div class=\"form-group\">\n                            <label for=\"upcoming\">Statusi</label>\n                            <select class=\"form-control\" name=\"comingSoon\" id=\"upcoming\" v-model=\"comingSoon\" required>\n                                <option value=\"false\">Duke u shfaqur</option>\n                                <option value=\"true\">Coming Soon</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <div class=\"form-group\">\n                            <label for=\"director\">Director</label>\n                            <input class=\"form-control\" type=\"text\" id=\"director\" v-model=\"director\" required>\n                        </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                        <div class=\"form-group\">\n                            <label for=\"trailer\">Traileri</label>\n                            <input class=\"form-control w-100\" type=\"text\" id=\"trailer\" v-model=\"trailerVideoUrl\" required>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <croppa v-model=\"croppa\"\n                                :width=\"300\"\n                                :height=\"200\"\n                                placeholder=\"Upload image\"\n                                :placeholder-font-size=\"14\"\n                                remove-button-color=\"black\"\n                                :prevent-white-space=\"true\">\n                            <img v-if=\"editing\" crossOrigin=\"anonymous\" :src=\"image\"\n                                 slot=\"initial\">\n                        </croppa>\n                    </div>\n                    <div class=\"col-md-6\">\n                        <label for=\"description\">Pershkrimi</label><br>\n                        <textarea class=\"form-control\" id=\"description\" cols=\"30\" rows=\"10\"\n                                  v-model=\"description\" required></textarea>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <div class=\"row\">\n                            <label for=\"genre\">Zhanri</label>\n                            <div class=\"input-group\">\n                                <input type=\"text\" class=\"form-control\" id=\"genre\" v-model=\"genre\">\n                                <div class=\"input-group-append\">\n                                    <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addGenre()\">Shto\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"container\">\n                            <span v-for=\"item in genres\" class=\"badge badge-pill badge-success pt-3 mb-3 mr-2\">{{item}}\n                                <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"\n                                        @click=\"removeGenre(item)\">\n                                    <span aria-hidden=\"true\">&times;</span>\n                                </button>\n                            </span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                        <div class=\"row\">\n                            <label for=\"actor\">Aktori</label>\n                            <div class=\"input-group\">\n                                <input type=\"text\" class=\"form-control\" id=\"actor\" v-model=\"actor\">\n                                <div class=\"input-group-append\">\n                                    <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addActor()\">Shto\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"container\">\n                            <span v-for=\"item in cast\" class=\"badge badge-pill badge-warning pt-3 mb-3 mr-2\">{{item}}\n                                <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"\n                                        @click=\"removeActor(item)\">\n                                    <span aria-hidden=\"true\">&times;</span>\n                                </button>\n                            </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </form>\n            <template v-slot:modal-footer=\"{}\">\n                <b-button size=\"sm\" variant=\"outline-danger\" @click=\"clearForm\">\n                    Pastro\n                </b-button>\n                <b-button size=\"sm\" variant=\"outline-danger\" @click=\"modalShow = !modalShow\">\n                    Mbylle\n                </b-button>\n                <b-button size=\"sm\" variant=\"outline-primary\" @click=\"upload\">\n                    Ruaj\n                </b-button>\n            </template>\n        </b-modal>\n    </div>\n</template>\n\n<script>\n    export default {\n\n        name: \"MovieModal\",\n        data() {\n            return {\n                editing: false,\n                id: '',\n                genre: '',\n                actor: '',\n\n                croppa: {},\n                modalShow: false,\n                title: '',\n                description: '',\n                releaseYear: null,\n                image: null,\n                trailerVideoUrl: null,\n                director: '',\n                genres: [],\n                cast: [],\n                comingSoon: false\n            }\n        },\n        methods: {\n            clearForm() {\n                this.genres = [];\n                this.cast = [];\n                this.croppa.remove();\n                this.title = '';\n                this.description = '';\n                this.releaseYear = '';\n                this.trailerVideoUrl = '';\n                this.director = '';\n                this.image = '';\n                this.editing = false;\n            },\n            getImageUrl(item) {\n                return `http://localhost:4000/public/${item}`;\n            },\n\n            editModal: function (movie) {\n                this.modalShow = true;\n                this.editing = true;\n\n                this.id = movie._id;\n                this.title = movie.title;\n                this.description = movie.description;\n                this.director = movie.director;\n                this.releaseYear = movie.releaseYear;\n                this.genres = movie.genres;\n                this.cast = movie.cast;\n                this.comingSoon = movie.comingSoon;\n                this.trailerVideoUrl = movie.trailerVideoUrl;\n                this.image = this.getImageUrl(movie.image);\n            },\n            addGenre: function () {\n                if (this.genre !== '' && !this.genres.includes(this.genre)) {\n                    this.genres.push(this.genre);\n                    this.genre = '';\n                }\n            },\n            removeGenre: function (item) {\n                this.genres = this.genres.filter(value => {\n                    return value !== item;\n                });\n            },\n            addActor: function () {\n                if (this.actor !== '' && !this.cast.includes(this.actor)) {\n                    this.cast.push(this.actor);\n                    this.actor = '';\n                }\n            },\n            removeActor: function (item) {\n                this.cast = this.cast.filter(value => {\n                    return value !== item;\n                });\n            },\n\n            upload: async function () {\n                if ((!this.croppa.hasImage() || this.croppa.getChosenFile() == null) && !this.editing) {\n                    alert('Nuk ka file te zgjedhur.');\n                    return\n                }\n                const blob = await this.croppa.promisedBlob();\n\n                const form = new FormData();\n\n                if (this.croppa.getChosenFile()) form.append('file', blob, this.croppa.getChosenFile().name);\n                form.append('title', this.title);\n                form.append('description', this.description);\n                form.append('releaseYear', this.releaseYear);\n                form.append('trailerVideoUrl', this.trailerVideoUrl);\n                form.append('director', this.director);\n                form.append('comingSoon', this.comingSoon);\n                if (this.editing) {\n                    form.append('id', this.id);\n                }\n                this.genres.forEach((value) => {\n                    console.log(value);\n                    form.append(\"genres\", value);\n                });\n                this.cast.forEach(value => {\n                    form.append(\"cast\", value);\n                });\n\n\n\n                console.log('before action', form);\n                let promise;\n                if (this.editing)\n                    promise = this.$store.dispatch('editMovie', {id: this.id, form});\n                else\n                    promise = this.$store.dispatch('postMovie', form);\n\n                promise.then(value => {\n                    this.$toasted.show('Filmi u ruajt me sukses.', {position: \"top-center\", duration: 3000});\n                    this.modalShow = false;\n                    this.editing = false;\n                    this.clearForm();\n                    })\n                    .catch(reason => {\n                        this.$toasted.error(reason.response.data || reason.response.data.message, {\n                            position: \"top-center\",\n                            duration: 3000\n                        });\n                        console.log(reason);\n                    });\n            }\n        },\n\n    }\n</script>\n\n<style scoped>\n    .badge .close {\n        margin-left: 0.25rem;\n        color: inherit;\n        font-size: 100%;\n        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n</style>\n"]}]}