{"remainingRequest":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/altin/WebstormProjects/Cinema/cinemarine/src/views/admin/components/MovieTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/src/views/admin/components/MovieTable.vue","mtime":1615842592793},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IE1vdmllTW9kYWwgZnJvbSAiLi9Nb3ZpZU1vZGFsIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IE1vdmllTW9kYWwgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7IG1vdmllczogImFsbE1vdmllcyIgfSksCiAgfSwKICBuYW1lOiAiTW92aWVUYWJsZSIsCiAgZGF0YTogKCkgPT4gKHsKICAgIHNob3dDb25maXJtYXRpb246IGZhbHNlLAogICAgZGlhbG9nOiBmYWxzZSwKICAgIGhlYWRlcnM6IFsKICAgICAgeyB0ZXh0OiAiRm90byIsIHZhbHVlOiAiaW1hZ2UiLCBzb3J0YWJsZTogZmFsc2UsIHdpZHRoOiAyMDAgfSwKICAgICAgeyB0ZXh0OiAiVGl0dWxsaSIsIHZhbHVlOiAidGl0bGUiIH0sCiAgICAgIHsgdGV4dDogIlZpdGkiLCB2YWx1ZTogInJlbGVhc2VZZWFyIiB9LAogICAgICB7IHRleHQ6ICJEaXJlY3RvciIsIHZhbHVlOiAiZGlyZWN0b3IiIH0sCiAgICAgIHsgdGV4dDogIlpoYW5yZXQiLCB2YWx1ZTogImdlbnJlcyIgfSwKICAgICAgeyB0ZXh0OiAiVXBjb21taW5nIiwgdmFsdWU6ICJjb21taW5nU29vbiIsIHdpZHRoOiAxMDAgfSwKICAgICAgeyB0ZXh0OiAiVmVwcmltZXQiLCB2YWx1ZTogImFjdGlvbiIgfSwKICAgIF0sCiAgICBzZWxlY3RlZEl0ZW06IHt9LAogIH0pLAoKICBtZXRob2RzOiB7CiAgICBzaG93RGVsZXRlTW9kYWwoaXRlbSkgewogICAgICBjb25zb2xlLmxvZygiY2xpY2tlZCIpOwogICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW07CiAgICAgIHRoaXMuc2hvd0NvbmZpcm1hdGlvbiA9IHRydWU7CiAgICB9LAogICAgZ2V0SW1hZ2VVcmwoaXRlbSkgewogICAgICByZXR1cm4gYGh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9wdWJsaWMvJHtpdGVtfWA7CiAgICB9LAogICAgY2hhbmdlVmFsdWUoaXRlbSkgewogICAgICBpdGVtLmNvbWluZ1Nvb24gPSAhaXRlbS5jb21pbmdTb29uOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2hhbmdlTW92aWVTdGF0dXMiLCB7CiAgICAgICAgaWQ6IGl0ZW0uX2lkLAogICAgICAgIHZhbHVlOiBpdGVtLmNvbWluZ1Nvb24sCiAgICAgIH0pOwogICAgfSwKICAgIGVkaXRNb3ZpZShtb3ZpZSkgewogICAgICB0aGlzLiRyZWZzLm1vdmllTW9kYWwuZWRpdE1vZGFsKG1vdmllKTsKICAgIH0sCiAgICBkZWxldGVNb3ZpZSgpIHsKICAgICAgdGhpcy4kc3RvcmUKICAgICAgICAuZGlzcGF0Y2goImRlbGV0ZU1vdmllIiwgdGhpcy5zZWxlY3RlZEl0ZW0uX2lkKQogICAgICAgIC50aGVuKCh2YWx1ZSkgPT4gewogICAgICAgICAgdGhpcy5zaG93Q29uZmlybWF0aW9uID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IHt9OwogICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KCJGaWxtaSB1IGZzaGkgbWUgc3Vrc2VzIiwgewogICAgICAgICAgICBkdXJhdGlvbjogMzAwMCwKICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtY2VudGVyIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZWFzb24pID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRBbGxNb3ZpZXMiKS50aGVuKCh2YWx1ZSkgPT4gewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCBmYWxzZSk7CiAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["MovieTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieTable.vue","sourceRoot":"src/views/admin/components","sourcesContent":["<template>\n  <div>\n    <v-data-table :headers=\"headers\" :items=\"movies\" i>\n      <template v-slot:top>\n        <MovieModal ref=\"movieModal\"></MovieModal>\n      </template>\n      <template v-slot:item.image=\"{ item }\">\n        <v-card class=\"mb-4 mt-4 \" elevation=\"5\">\n          <img :src=\"getImageUrl(item.image)\" alt=\"\" height=\"200\" width=\"300\" />\n        </v-card>\n      </template>\n      <template v-slot:item.commingSoon=\"{ item }\">\n        <toggle-button\n          :value=\"item.comingSoon\"\n          @change=\"changeValue(item)\"\n          :labels=\"{ checked: 'Upcomming', unchecked: 'Duke u Shfaqur' }\"\n          :width=\"100\"\n        >\n        </toggle-button>\n      </template>\n      <template v-slot:item.action=\"{ item }\">\n        <a @click=\"editMovie(item)\">\n          <v-icon small class=\"mr-3 ms-icon\">fas fa-edit</v-icon>\n        </a>\n        <a @click=\"showDeleteModal(item)\">\n          <v-icon small class=\"mr-3 ms-icon\">fas fa-trash</v-icon>\n        </a>\n      </template>\n    </v-data-table>\n    <b-modal\n      v-model=\"showConfirmation\"\n      size=\"sm\"\n      :hide-header=\"true\"\n      :hide-footer=\"true\"\n    >\n      <div class=\"card\">\n        <div class=\"card-header\">\n          <div class=\"text-center\">Konfirmo Fshirjen</div>\n        </div>\n      </div>\n      <div class=\"card-body\">\n        <ul>\n          <li>Titulli: {{ selectedItem.title }}</li>\n          <li>Pershkrimi: {{ selectedItem.description }}</li>\n        </ul>\n      </div>\n      <div class=\"card-footer\">\n        <div class=\"d-flex justify-content-center\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-danger\"\n            @click=\"deleteMovie\"\n          >\n            <v-icon>fas fa-trash</v-icon>\n          </button>\n        </div>\n      </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport MovieModal from \"./MovieModal\";\n\nexport default {\n  components: { MovieModal },\n  computed: {\n    ...mapGetters({ movies: \"allMovies\" }),\n  },\n  name: \"MovieTable\",\n  data: () => ({\n    showConfirmation: false,\n    dialog: false,\n    headers: [\n      { text: \"Foto\", value: \"image\", sortable: false, width: 200 },\n      { text: \"Titulli\", value: \"title\" },\n      { text: \"Viti\", value: \"releaseYear\" },\n      { text: \"Director\", value: \"director\" },\n      { text: \"Zhanret\", value: \"genres\" },\n      { text: \"Upcomming\", value: \"commingSoon\", width: 100 },\n      { text: \"Veprimet\", value: \"action\" },\n    ],\n    selectedItem: {},\n  }),\n\n  methods: {\n    showDeleteModal(item) {\n      console.log(\"clicked\");\n      this.selectedItem = item;\n      this.showConfirmation = true;\n    },\n    getImageUrl(item) {\n      return `http://localhost:4000/public/${item}`;\n    },\n    changeValue(item) {\n      item.comingSoon = !item.comingSoon;\n      this.$store.dispatch(\"changeMovieStatus\", {\n        id: item._id,\n        value: item.comingSoon,\n      });\n    },\n    editMovie(movie) {\n      this.$refs.movieModal.editModal(movie);\n    },\n    deleteMovie() {\n      this.$store\n        .dispatch(\"deleteMovie\", this.selectedItem._id)\n        .then((value) => {\n          this.showConfirmation = false;\n          this.selectedItem = {};\n          this.$toasted.show(\"Filmi u fshi me sukses\", {\n            duration: 3000,\n            position: \"top-center\",\n          });\n        })\n        .catch((reason) => {\n          console.log(reason);\n        });\n    },\n  },\n\n  created() {\n    this.$store.commit(\"setLoading\", true);\n    this.$store.dispatch(\"getAllMovies\").then((value) => {\n      this.$store.commit(\"setLoading\", false);\n    });\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}