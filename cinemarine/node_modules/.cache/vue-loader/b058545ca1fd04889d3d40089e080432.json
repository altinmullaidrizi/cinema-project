{"remainingRequest":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/altin/WebstormProjects/Cinema/cinemarine/src/views/admin/Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/src/views/admin/Users.vue","mtime":1615842413712},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/altin/WebstormProjects/Cinema/cinemarine/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJVc2VycyIsCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcEdldHRlcnMoe3VzZXJzOiAnZ2V0VXNlcnMnfSkKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGhlYWRlcnM6IFsKICAgICAgICAgICAgICAgIHt0ZXh0OiAnVXNlcm5hbWUnLCB2YWx1ZTogJ3VzZXJuYW1lJ30sCiAgICAgICAgICAgICAgICB7dGV4dDogJ0VtYWlsJywgdmFsdWU6ICdlbWFpbCd9LAogICAgICAgICAgICAgICAge3RleHQ6ICdSb2xpJywgdmFsdWU6ICdyb2xlJ30sCiAgICAgICAgICAgICAgICB7dGV4dDogJ0RhdGEnLCB2YWx1ZTogJ2RhdGUnfSwKICAgICAgICAgICAgICAgIHt0ZXh0OiAnVmVwcmltaScsIHZhbHVlOiAnYWN0aW9uJ30KICAgICAgICAgICAgXSwKICAgICAgICAgICAgc2hvd0RlbGV0ZUNvbmZpcm1hdGlvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dFZGl0TW9kYWw6IGZhbHNlLAogICAgICAgICAgICBzZWxlY3RlZEl0ZW06IHt9LAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2hvd0VkaXQoaXRlbSkgewogICAgICAgICAgICB0aGlzLnNob3dFZGl0TW9kYWwgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW0KICAgICAgICB9LAogICAgICAgIHNob3dEZWxldGVNb2RhbChpdGVtKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTsKICAgICAgICAgICAgdGhpcy5zaG93RGVsZXRlQ29uZmlybWF0aW9uID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIHNhdmVVc2VyKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkSXRlbSk7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdlZGl0VXNlcicsIHtpZDogdGhpcy5zZWxlY3RlZEl0ZW0uX2lkLCByb2xlOiB0aGlzLnNlbGVjdGVkSXRlbS5yb2xlfSk7CiAgICAgICAgICAgIC8vIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRBbGxVc2VycycpOwogICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IHt9OwogICAgICAgICAgICB0aGlzLnNob3dFZGl0TW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe30pOwogICAgICAgIH0sCiAgICAgICAgZGVsZXRlVXNlcigpIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2RlbGV0ZVVzZXInLCB0aGlzLnNlbGVjdGVkSXRlbS5faWQpCiAgICAgICAgICAgICAgICAudGhlbih2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KCdVc2VyaSB1IGZzaGkgbWUgc3Vrc2VzJywge2R1cmF0aW9uOiAyMDAwLCBwb3NpdGlvbjogInRvcC1jZW50ZXIifSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldEFsbFVzZXJzJyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSB7fTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEZWxldGVDb25maXJtYXRpb24gPSBmYWxzZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoJ1VzZXJpIG51ayB1IGZzaGknLCB7ZHVyYXRpb246IDIwMDAsIHBvc2l0aW9uOiAidG9wLWNlbnRlciJ9KQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0ge307CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGVsZXRlQ29uZmlybWF0aW9uID0gZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0QWxsVXNlcnMnKQogICAgICAgICAgICAudGhlbih2YWx1ZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndmFsdWUnLCB2YWx1ZSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKHJlYXNvbiA9PiBjb25zb2xlLmxvZyhyZWFzb24pKTsKICAgIH0KfQo="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n    <div class=\"container--fluid\">\n        <v-data-table :headers=\"headers\" :items=\"users\" i>\n            <template v-slot:top>\n            </template>\n            <template v-slot:item.action=\"{ item }\">\n                <a @click=\"showEdit(item)\">\n                    <v-icon small class=\"mr-3\">fas fa-edit</v-icon>\n                </a>\n                <a @click=\"showDeleteModal(item)\">\n                    <v-icon small class=\"mr-3 ms-icon\">fas fa-trash</v-icon>\n                </a>\n            </template>\n        </v-data-table>\n        <b-modal v-model=\"showDeleteConfirmation\" size=\"sm\" :hide-header=\"true\" :hide-footer=\"true\">\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"text-center\">Konfirmo Fshirjen</div>\n                </div>\n            </div>\n            <div class=\"card-body\">\n                <ul>\n                    <li>username: {{selectedItem.username}}</li>\n                    <li>email: {{selectedItem.email}}</li>\n                </ul>\n            </div>\n            <div class=\"card-footer\">\n                <div class=\"d-flex justify-content-center\">\n                    <button type=\"button\" class=\"btn btn-outline-danger\" @click=\"deleteUser()\">\n                        <v-icon>fas fa-trash</v-icon>\n                    </button>\n                </div>\n            </div>\n        </b-modal>\n        <b-modal v-model=\"showEditModal\" size=\"md\" :hide-header=\"true\">\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"text-center\">Edit User</div>\n                </div>\n            </div>\n            <div class=\"card-body\">\n                <form>\n                    <div class=\"row\">\n                        <div class=\"col-md-6\">\n                            <div class=\"form-group\">\n                                <label for=\"username\">Username</label>\n                                <input class=\"form-control\" type=\"text\" id=\"username\" :value=\"selectedItem.username\"\n                                       readonly>\n                            </div>\n                        </div>\n                        <div class=\"col-md-6\">\n                            <div class=\"form-group\">\n                                <label for=\"email\">Email</label>\n                                <input class=\"form-control\" type=\"text\" id=\"email\" :value=\"selectedItem.email\" readonly>\n                            </div>\n                        </div>\n\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-6\">\n                            <label for=\"role\">Roli</label>\n                            <select class=\"form-control\" name=\"comingSoon\" id=\"role\" v-model=\"selectedItem.role\"\n                                    required>\n                                <option value=\"0\">User</option>\n                                <option value=\"1\">Admin</option>\n                            </select>\n                        </div>\n\n                    </div>\n                </form>\n            </div>\n            <template v-slot:modal-footer=\"{}\">\n                <b-button size=\"sm\" variant=\"outline-danger\" @click=\"showEditModal = !showEditModal\">\n                    Mbylle\n                </b-button>\n                <b-button size=\"sm\" variant=\"outline-primary\" @click=\"saveUser\">\n                    Ruaj\n                </b-button>\n            </template>\n        </b-modal>\n    </div>\n</template>\n\n<script>\n    import {mapGetters} from 'vuex'\n\n    export default {\n        name: \"Users\",\n        computed: {\n            ...mapGetters({users: 'getUsers'})\n        },\n        data() {\n            return {\n                headers: [\n                    {text: 'Username', value: 'username'},\n                    {text: 'Email', value: 'email'},\n                    {text: 'Roli', value: 'role'},\n                    {text: 'Data', value: 'date'},\n                    {text: 'Veprimi', value: 'action'}\n                ],\n                showDeleteConfirmation: false,\n                showEditModal: false,\n                selectedItem: {},\n            }\n        },\n        methods: {\n            showEdit(item) {\n                this.showEditModal = true;\n                this.selectedItem = item\n            },\n            showDeleteModal(item) {\n                this.selectedItem = item;\n                this.showDeleteConfirmation = true;\n            },\n            saveUser() {\n                console.log(this.selectedItem);\n                this.$store.dispatch('editUser', {id: this.selectedItem._id, role: this.selectedItem.role});\n                // this.$store.dispatch('getAllUsers');\n                this.selectedItem = {};\n                this.showEditModal = false;\n                this.$router.push({});\n            },\n            deleteUser() {\n                this.$store.dispatch('deleteUser', this.selectedItem._id)\n                    .then(value => {\n                        this.$toasted.show('Useri u fshi me sukses', {duration: 2000, position: \"top-center\"});\n                        this.$store.dispatch('getAllUsers');\n                        this.selectedItem = {};\n                        this.showDeleteConfirmation = false\n                    })\n                    .catch(reason => {\n                        this.$toasted.error('Useri nuk u fshi', {duration: 2000, position: \"top-center\"})\n                        this.selectedItem = {};\n                        this.showDeleteConfirmation = false\n                    });\n            },\n        },\n        created() {\n            this.$store.dispatch('getAllUsers')\n                .then(value => {\n                    console.log('value', value)\n                })\n                .catch(reason => console.log(reason));\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}